# Исправление ошибки прав доступа YandexGPT

## Ошибка:
```
PermissionDenied desc = Permission to [resource-manager.folder ...] denied
```

## Решение:

### Вариант 1: Использовать IAM токен вместо API ключа (рекомендуется)

YandexGPT может требовать IAM токен вместо API ключа сервисного аккаунта.

**Как получить IAM токен:**

1. В Yandex Cloud перейдите в раздел **"Сервисные аккаунты"**
2. Выберите ваш сервисный аккаунт
3. Перейдите в раздел **"Ключи"**
4. Создайте **IAM токен** (не API ключ!)
5. Используйте этот токен в `YANDEX_API_KEY`

### Вариант 2: Проверить права сервисного аккаунта

1. В Yandex Cloud перейдите в раздел **"Сервисные аккаунты"**
2. Выберите ваш сервисный аккаунт
3. Перейдите в раздел **"Права доступа"**
4. Убедитесь, что назначены роли:
   - `ai.languageModels.user` - для использования YandexGPT
   - `editor` - для доступа к ресурсам (опционально, но может помочь)

### Вариант 3: Использовать OAuth токен

Если у вас есть OAuth токен от Yandex ID, можно использовать его вместо API ключа.

### Вариант 4: Проверить Folder ID

Убедитесь, что:
- Folder ID правильный (из вашего каталога)
- Каталог активен
- У сервисного аккаунта есть доступ к этому каталогу

## Быстрая проверка:

1. **Создайте IAM токен** (не API ключ!)
2. **Обновите `.env`** с IAM токеном
3. **Перезапустите сервер**
4. **Попробуйте снова**

## Альтернатива: Использовать другой способ авторизации

Если проблема сохраняется, можно попробовать использовать OAuth токен или другой метод авторизации.
